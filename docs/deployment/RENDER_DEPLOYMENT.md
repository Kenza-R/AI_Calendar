# üöÄ Render Deployment Guide for AI Calendar

## üìã Prerequisites

1. GitHub repository: https://github.com/Kenza-R/AI_Calendar
2. Render account (free): https://render.com
3. OpenAI API key

---

## üéØ Deployment Options

### Option 1: Using render.yaml (Recommended)

The `render.yaml` file is included in the repository for automatic deployment.

#### Steps:

1. **Go to Render Dashboard:**
   - Visit https://dashboard.render.com

2. **Create New Blueprint:**
   - Click "New" ‚Üí "Blueprint"
   - Connect your GitHub account if not already connected
   - Select repository: `Kenza-R/AI_Calendar`
   - Render will detect `render.yaml` automatically

3. **Configure Environment Variables:**
   - `OPENAI_API_KEY`: Your OpenAI API key (required for enhanced features)
   - `SECRET_KEY`: Auto-generated by Render
   - `DATABASE_URL`: Pre-configured for SQLite
   - `CORS_ORIGINS`: Set to your frontend URL

4. **Deploy:**
   - Click "Apply"
   - Wait for build to complete (~5 minutes)

---

### Option 2: Manual Service Creation

If you prefer manual setup:

#### Backend Deployment:

1. **Create New Web Service:**
   - Dashboard ‚Üí "New" ‚Üí "Web Service"
   - Connect to `Kenza-R/AI_Calendar`

2. **Configure Build Settings:**
   ```
   Name: ai-calendar-backend
   Region: Oregon (or nearest)
   Branch: main
   Root Directory: (leave empty or set to backend)
   Runtime: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT
   ```

3. **Environment Variables:**
   Add these in the "Environment" tab:
   ```
   OPENAI_API_KEY = your-api-key-here
   SECRET_KEY = your-secret-key-here
   DATABASE_URL = sqlite:///./ai_calendar.db
   ALGORITHM = HS256
   ACCESS_TOKEN_EXPIRE_MINUTES = 30
   CORS_ORIGINS = ["https://your-frontend-url.com"]
   ```

4. **Advanced Settings:**
   - Health Check Path: `/health`
   - Auto-Deploy: Yes

---

## üîß Configuration Files Created

### 1. `render.yaml`
Blueprint configuration for automatic deployment:
- Defines backend service
- Sets Python version
- Configures environment variables
- Sets health check endpoint

### 2. `requirements.txt` (root)
Copy of backend requirements for easy access by Render.

### 3. `build.sh`
Build script for Render deployment.

---

## üìù Important Configuration

### Backend Start Command:
```bash
cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT
```

### Backend Build Command:
```bash
pip install -r requirements.txt
```

### Health Check:
```
GET /health
```
Should return: `{"status": "healthy"}`

---

## üåê After Deployment

### Your Backend URL:
```
https://ai-calendar-backend.onrender.com
```

### Test Endpoints:
1. **Health Check:**
   ```
   https://ai-calendar-backend.onrender.com/health
   ```

2. **API Documentation:**
   ```
   https://ai-calendar-backend.onrender.com/docs
   ```

3. **Enhanced Upload:**
   ```
   POST https://ai-calendar-backend.onrender.com/api/documents/upload-syllabus-enhanced
   ```

---

## üé® Frontend Deployment Options

### Option A: Vercel (Recommended)

1. Go to https://vercel.com
2. Import repository
3. Configure:
   ```
   Framework Preset: Vite
   Root Directory: frontend
   Build Command: npm run build
   Output Directory: dist
   ```
4. Environment Variables:
   ```
   VITE_API_URL=https://ai-calendar-backend.onrender.com
   ```

### Option B: Netlify

1. Go to https://netlify.com
2. Import repository
3. Configure:
   ```
   Base directory: frontend
   Build command: npm run build
   Publish directory: frontend/dist
   ```
4. Environment Variables:
   ```
   VITE_API_URL=https://ai-calendar-backend.onrender.com
   ```

### Option C: Render Static Site

Uncomment the frontend section in `render.yaml` to deploy on Render.

---

## üîê Security Considerations

### Required Environment Variables:
1. **OPENAI_API_KEY**: Get from https://platform.openai.com/api-keys
2. **SECRET_KEY**: Use a strong random string (Render can auto-generate)

### CORS Configuration:
Update `CORS_ORIGINS` to include your actual frontend URL:
```python
CORS_ORIGINS = ["https://your-frontend-url.com", "https://your-frontend-url.vercel.app"]
```

---

## üêõ Troubleshooting

### ‚úÖ Build Successful but Start Failed (Status 127):
**Fixed!** The `start_render.sh` script now properly changes to the backend directory before starting the server.

### Build Failed - Requirements Not Found:
‚úÖ **Fixed!** `requirements.txt` is now in root directory.

### Database Issues:
- Free tier uses SQLite (file-based)
- Data persists in `/opt/render/project/src/backend/`
- For production, consider PostgreSQL upgrade

### CORS Errors:
1. Check `CORS_ORIGINS` environment variable
2. Include your actual frontend URL
3. Restart service after changes

### Import Errors:
- Make sure all dependencies are in `requirements.txt`
- Check Python version compatibility (3.11.0 recommended)

### OpenAI API Errors:
- Verify `OPENAI_API_KEY` is set correctly
- Check API key has credits
- Enhanced features require valid API key

---

## üìä Monitoring

### Render Dashboard:
- View logs in real-time
- Monitor resource usage
- Check deployment history

### Health Checks:
Render automatically pings `/health` endpoint to ensure service is running.

---

## üí∞ Cost Considerations

### Free Tier Includes:
- 750 hours/month
- 512MB RAM
- Automatic SSL
- GitHub integration
- Automatic deploys

### Limitations:
- Service sleeps after 15 minutes of inactivity
- First request may be slow (cold start ~30s)
- 100GB bandwidth/month

### Upgrade Options:
- Starter: $7/month (always on, 512MB RAM)
- Standard: $25/month (2GB RAM)

---

## üöÄ Quick Deploy Checklist

- [ ] Push latest code to GitHub
- [ ] Create Render account
- [ ] Create new Blueprint or Web Service
- [ ] Set `OPENAI_API_KEY` environment variable
- [ ] Set `SECRET_KEY` environment variable
- [ ] Configure `CORS_ORIGINS` with frontend URL
- [ ] Wait for build to complete
- [ ] Test `/health` endpoint
- [ ] Test `/docs` endpoint
- [ ] Deploy frontend (Vercel/Netlify)
- [ ] Update frontend API URL
- [ ] Test full application

---

## üìö Additional Resources

- **Render Docs:** https://render.com/docs
- **Python on Render:** https://render.com/docs/deploy-fastapi
- **Environment Variables:** https://render.com/docs/environment-variables
- **Troubleshooting:** https://render.com/docs/troubleshooting-deploys

---

## ‚úÖ Success!

Once deployed, your AI Calendar will be accessible at:
- **Backend:** `https://your-service.onrender.com`
- **API Docs:** `https://your-service.onrender.com/docs`
- **Frontend:** `https://your-frontend.vercel.app` (or Netlify)

**Enjoy your deployed AI Calendar with enhanced features!** üéâ
